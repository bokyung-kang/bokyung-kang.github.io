<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jenkins에서 Spring Batch 프로젝트를 Gradle 빌드하기 | Bokyung's Note</title><meta name=keywords content="AWS,Jenkins,Spring,gradle"><meta name=description content="스프링 배치 Job Runner를 조사하던 중에 Jenkins에서 batch프로젝트를 gradle빌드해 보았습니다.
Jenkins 환경  Amazon Linux2  AMI ID : ami-0f27d081df46f326c AMI 이름 : amzn2-ami-hvm-2.0.20210303.0-x86_64-gp2   Jenkins  version : Jenkins 2.284    인증정보 등록 Github 아이디/패스워드 인증 방법   Jenkins에서 Repository관련 작업이 가능하도록 Github에서 Personal access tokens를 발행합니다. ( Settings > Developer settings > Personal access tokens )     Manage Jenkins > Manage Credentials > domain에 있는 global을 클릭합니다."><meta name=author content="bokyung"><link rel=canonical href=https://bokyung.dev/2021/03/30/jenkins-gradle-build/><link href=/assets/css/stylesheet.min.51be3134aeb3ee2a7ba26b0517cda3b0602df6d6d88a93c6ffd2baff8d456708.css integrity="sha256-Ub4xNK6z7ip7omsFF82jsGAt9tbYipPG/9K6/41FZwg=" rel="preload stylesheet" as=style><link rel=icon href=https://bokyung.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bokyung.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bokyung.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://bokyung.dev/apple-touch-icon.png><link rel=mask-icon href=https://bokyung.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><link rel=alternate hreflang=ko href=https://bokyung.dev/2021/03/30/jenkins-gradle-build/><link rel=alternate hreflang=ja href=https://bokyung.dev/ja/2021/03/30/jenkins-gradle-build/><meta property="og:title" content="Jenkins에서 Spring Batch 프로젝트를 Gradle 빌드하기"><meta property="og:description" content="스프링 배치 Job Runner를 조사하던 중에 Jenkins에서 batch프로젝트를 gradle빌드해 보았습니다.
Jenkins 환경  Amazon Linux2  AMI ID : ami-0f27d081df46f326c AMI 이름 : amzn2-ami-hvm-2.0.20210303.0-x86_64-gp2   Jenkins  version : Jenkins 2.284    인증정보 등록 Github 아이디/패스워드 인증 방법   Jenkins에서 Repository관련 작업이 가능하도록 Github에서 Personal access tokens를 발행합니다. ( Settings > Developer settings > Personal access tokens )     Manage Jenkins > Manage Credentials > domain에 있는 global을 클릭합니다."><meta property="og:type" content="article"><meta property="og:url" content="https://bokyung.dev/2021/03/30/jenkins-gradle-build/"><meta property="article:published_time" content="2021-03-30T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-30T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Jenkins에서 Spring Batch 프로젝트를 Gradle 빌드하기"><meta name=twitter:description content="스프링 배치 Job Runner를 조사하던 중에 Jenkins에서 batch프로젝트를 gradle빌드해 보았습니다.
Jenkins 환경  Amazon Linux2  AMI ID : ami-0f27d081df46f326c AMI 이름 : amzn2-ami-hvm-2.0.20210303.0-x86_64-gp2   Jenkins  version : Jenkins 2.284    인증정보 등록 Github 아이디/패스워드 인증 방법   Jenkins에서 Repository관련 작업이 가능하도록 Github에서 Personal access tokens를 발행합니다. ( Settings > Developer settings > Personal access tokens )     Manage Jenkins > Manage Credentials > domain에 있는 global을 클릭합니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jenkins에서 Spring Batch 프로젝트를 Gradle 빌드하기","name":"Jenkins에서 Spring Batch 프로젝트를 Gradle 빌드하기","description":"스프링 배치 Job Runner를 조사하던 중에 Jenkins에서 batch프로젝트를 gradle빌드해 보았습니다.\nJenkins 환경  Amazon Linux2  AMI ID : ami-0f27d081df46f326c AMI 이름 : amzn2-ami-hvm-2.0.20210303.0-x86_64-gp2 …","keywords":["AWS","Jenkins","Spring","gradle"],"articleBody":"스프링 배치 Job Runner를 조사하던 중에 Jenkins에서 batch프로젝트를 gradle빌드해 보았습니다.\nJenkins 환경  Amazon Linux2  AMI ID : ami-0f27d081df46f326c AMI 이름 : amzn2-ami-hvm-2.0.20210303.0-x86_64-gp2   Jenkins  version : Jenkins 2.284    인증정보 등록 Github 아이디/패스워드 인증 방법   Jenkins에서 Repository관련 작업이 가능하도록 Github에서 Personal access tokens를 발행합니다. ( Settings  Developer settings  Personal access tokens )     Manage Jenkins  Manage Credentials  domain에 있는 global을 클릭합니다.     Kind는 Username with password를 선택하고 패스워드란에 Personal access tokens값을 입력하고 인증정보를 추가합니다.     Github SSH 인증 방법   SSH키를 생성합니다.       Github 프로젝트 설정에서 Deploy keys에 공개키를 추가합니다.     Kind는 SSH Username with private key를 선택하고 Private Key  Enter directly 에 비밀키를 추가합니다.     Gradle, JDK설정  프로젝트에서 사용할 Gradle과 JDK를 Manage Jenkins  System Configuration  Global Tool Configuration에서 설정합니다. 한가지 버전만 설정한 경우 각 JOB에서 디폴트로 설정됩니다. 복수개 버전이 등록된 경우에는 JOB설정시 버전선택이 가능합니다.     Job등록   New Item  Freestyle project을 선택해서 Job을 등록합니다. github access tokens으로 인증할 경우에는 Repository URL에 git@github.com:bokyung-kang/batch-test을 입력하고 Credentials에서 github인증을 등록한 Username을 선택합니다.     ssh인증할 경우에는 Repository URL에 git@github.com:bokyung-kang/batch-test을 입력하고 Credentials에서 ssh을 등록한 Username을 선택합니다.     build script\nchmod +x gradlew # test를 실행안하려고 저는 assemble을 실행했습니다 ./gradlew assemble # deploy-test에 jar복사 mkdir -p $JENKINS_HOME/workspace/deploy-test cp $WORKSPACE/build/libs/*.jar $JENKINS_HOME/workspace/deploy-test/.   Gradle Build  빌드를 실행합니다.  [batch-test] $ /bin/sh -xe /tmp/jenkins568576160326820555.sh + chmod +x gradlew + ./gradlew assemble Starting a Gradle Daemon (subsequent builds will be faster)  Task :compileKotlin  Task :compileJava NO-SOURCE  Task :processResources  Task :classes  Task :bootJarMainClassName  Task :bootJar  Task :inspectClassesForKotlinIC  Task :jar SKIPPED  Task :assemble BUILD SUCCESSFUL in 33s 5 actionable tasks: 5 executed + mkdir -p /var/lib/jenkins/workspace/deploy-test + cp /var/lib/jenkins/workspace/batch-test/build/libs/batch-0.0.1-SNAPSHOT.jar /var/lib/jenkins/workspace/deploy-test/. Finished: SUCCESS  $JENKINS_HOME/workspace/deploy-test/에 jar파일이 복사되었네요.     ","wordCount":"265","inLanguage":"ko","datePublished":"2021-03-30T00:00:00Z","dateModified":"2021-03-30T00:00:00Z","author":{"@type":"Person","name":"bokyung"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bokyung.dev/2021/03/30/jenkins-gradle-build/"},"publisher":{"@type":"Organization","name":"Bokyung's Note","logo":{"@type":"ImageObject","url":"https://bokyung.dev/favicon.ico"}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-R7DJYPBNN5"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-R7DJYPBNN5')</script><script>(function(b,d,e,a,g){b[a]=b[a]||[],b[a].push({'gtm.start':(new Date).getTime(),event:'gtm.js'});var f=d.getElementsByTagName(e)[0],c=d.createElement(e),h=a!='dataLayer'?'&l='+a:'';c.async=!0,c.src='https://www.googletagmanager.com/gtm.js?id='+g+h,f.parentNode.insertBefore(c,f)})(window,document,'script','dataLayer','GTM-KTQ8KCW')</script></script><script data-ad-client=ca-pub-8342838924011258 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body id=top><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTQ8KCW" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>.theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://bokyung.dev/ accesskey=h title="Bokyung's Note (Alt + H)"><img src=/images/main_icon.jpg alt=logo aria-label=logo width=30px>Bokyung's Note</a>
<span class=logo-switches><ul class=lang-switch><li>|</li><li><a href=https://bokyung.dev/ja/ title=ja aria-label=ja>Ja</a></li></ul></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://bokyung.dev/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://bokyung.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://bokyung.dev/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8342838924011258 data-ad-slot=6402405361 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><h1 class=post-title>Jenkins에서 Spring Batch 프로젝트를 Gradle 빌드하기</h1><div class=post-meta>2021-03-30&nbsp;·&nbsp;bokyung
&nbsp;|&nbsp;<ul class=i18n_list>Translations:<li><a href=https://bokyung.dev/ja/2021/03/30/jenkins-gradle-build/>Ja</a></li></ul></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><div class=details>목차</div></summary><div class=inner><ul><li><a href=#jenkins-%ed%99%98%ea%b2%bd aria-label="Jenkins 환경">Jenkins 환경</a></li><li><a href=#%ec%9d%b8%ec%a6%9d%ec%a0%95%eb%b3%b4-%eb%93%b1%eb%a1%9d aria-label="인증정보 등록">인증정보 등록</a><ul><li><a href=#github-%ec%95%84%ec%9d%b4%eb%94%94%ed%8c%a8%ec%8a%a4%ec%9b%8c%eb%93%9c-%ec%9d%b8%ec%a6%9d-%eb%b0%a9%eb%b2%95 aria-label="Github 아이디/패스워드 인증 방법">Github 아이디/패스워드 인증 방법</a></li><li><a href=#github-ssh-%ec%9d%b8%ec%a6%9d-%eb%b0%a9%eb%b2%95 aria-label="Github SSH 인증 방법">Github SSH 인증 방법</a></li><li><a href=#gradle-jdk%ec%84%a4%ec%a0%95 aria-label="Gradle, JDK설정">Gradle, JDK설정</a></li><li><a href=#job%eb%93%b1%eb%a1%9d aria-label=Job등록>Job등록</a></li><li><a href=#gradle-build aria-label="Gradle Build">Gradle Build</a></li></ul></li></ul></div></details></div><div class=post-content><p>스프링 배치 Job Runner를 조사하던 중에 Jenkins에서 batch프로젝트를 gradle빌드해 보았습니다.</p><h2 id=jenkins-환경>Jenkins 환경<a hidden class=anchor aria-hidden=true href=#jenkins-환경>#</a></h2><ul><li>Amazon Linux2<ul><li>AMI ID : ami-0f27d081df46f326c</li><li>AMI 이름 : amzn2-ami-hvm-2.0.20210303.0-x86_64-gp2</li></ul></li><li>Jenkins<ul><li>version : Jenkins 2.284</li></ul></li></ul><h2 id=인증정보-등록>인증정보 등록<a hidden class=anchor aria-hidden=true href=#인증정보-등록>#</a></h2><h3 id=github-아이디패스워드-인증-방법>Github 아이디/패스워드 인증 방법<a hidden class=anchor aria-hidden=true href=#github-아이디패스워드-인증-방법>#</a></h3><ul><li><p>Jenkins에서 Repository관련 작업이 가능하도록 Github에서 <code>Personal access tokens</code>를 발행합니다. ( Settings > Developer settings > Personal access tokens )<figure><a href=/images/2021/0330/gihhub-personal-access-tokens.png><img src=/images/2021/0330/gihhub-personal-access-tokens.png alt=gihhub-personal-access-tokens></a></figure></p></li><li><p>Manage Jenkins > Manage Credentials > domain에 있는 global을 클릭합니다.<figure><a href=/images/2021/0330/global-credential.png><img src=/images/2021/0330/global-credential.png alt=global-credential></a></figure></p></li><li><p>Kind는 <code>Username with password</code>를 선택하고 패스워드란에 <code>Personal access tokens</code>값을 입력하고 인증정보를 추가합니다.<figure><a href=/images/2021/0330/github-credential.png><img src=/images/2021/0330/github-credential.png alt=github-credential></a></figure></p></li></ul><h3 id=github-ssh-인증-방법>Github SSH 인증 방법<a hidden class=anchor aria-hidden=true href=#github-ssh-인증-방법>#</a></h3><ul><li><p>SSH키를 생성합니다.<figure><a href=/images/2021/0330/generate-ssh-key.png><img src=/images/2021/0330/generate-ssh-key.png alt=generate-ssh-key></a></figure><figure><a href=/images/2021/0330/jenkins-ssh-key.png><img src=/images/2021/0330/jenkins-ssh-key.png alt=jenkins-ssh-key></a></figure></p></li><li><p>Github 프로젝트 설정에서 <code>Deploy keys</code>에 공개키를 추가합니다.<figure><a href=/images/2021/0330/deploy-keys.png><img src=/images/2021/0330/deploy-keys.png alt=deploy-keys></a></figure></p></li><li><p>Kind는 <code>SSH Username with private key</code>를 선택하고 <code>Private Key > Enter directly</code> 에 비밀키를 추가합니다.<figure><a href=/images/2021/0330/ssh-credential.png><img src=/images/2021/0330/ssh-credential.png alt=ssh-credential></a></figure></p></li></ul><h3 id=gradle-jdk설정>Gradle, JDK설정<a hidden class=anchor aria-hidden=true href=#gradle-jdk설정>#</a></h3><ul><li>프로젝트에서 사용할 Gradle과 JDK를 <code>Manage Jenkins > System Configuration > Global Tool Configuration</code>에서 설정합니다. 한가지 버전만 설정한 경우 각 JOB에서 디폴트로 설정됩니다. 복수개 버전이 등록된 경우에는 JOB설정시 버전선택이 가능합니다.<figure><a href=/images/2021/0330/jenkins-global-tool-configuration.png><img src=/images/2021/0330/jenkins-global-tool-configuration.png alt=jenkins-global-tool-configuration></a></figure></li></ul><h3 id=job등록>Job등록<a hidden class=anchor aria-hidden=true href=#job등록>#</a></h3><ul><li><p><code>New Item > Freestyle project</code>을 선택해서 Job을 등록합니다. github access tokens으로 인증할 경우에는 Repository URL에 <code>git@github.com:bokyung-kang/batch-test</code>을 입력하고 Credentials에서 github인증을 등록한 Username을 선택합니다.<figure><a href=/images/2021/0330/build-job-github.png><img src=/images/2021/0330/build-job-github.png alt=build-job-github></a></figure></p></li><li><p>ssh인증할 경우에는 Repository URL에 <code>git@github.com:bokyung-kang/batch-test</code>을 입력하고 Credentials에서 ssh을 등록한 Username을 선택합니다.<figure><a href=/images/2021/0330/build-job-ssh.png><img src=/images/2021/0330/build-job-ssh.png alt=build-job-ssh></a></figure></p></li><li><p>build script</p><pre><code>chmod +x gradlew

# test를 실행안하려고 저는 assemble을 실행했습니다
./gradlew assemble

# deploy-test에  jar복사
mkdir -p $JENKINS_HOME/workspace/deploy-test
cp $WORKSPACE/build/libs/*.jar $JENKINS_HOME/workspace/deploy-test/.
</code></pre></li></ul><h3 id=gradle-build>Gradle Build<a hidden class=anchor aria-hidden=true href=#gradle-build>#</a></h3><ul><li>빌드를 실행합니다.</li></ul><pre><code>[batch-test] $ /bin/sh -xe /tmp/jenkins568576160326820555.sh
+ chmod +x gradlew
+ ./gradlew assemble
Starting a Gradle Daemon (subsequent builds will be faster)
&gt; Task :compileKotlin
&gt; Task :compileJava NO-SOURCE
&gt; Task :processResources
&gt; Task :classes
&gt; Task :bootJarMainClassName
&gt; Task :bootJar
&gt; Task :inspectClassesForKotlinIC
&gt; Task :jar SKIPPED
&gt; Task :assemble

BUILD SUCCESSFUL in 33s
5 actionable tasks: 5 executed
+ mkdir -p /var/lib/jenkins/workspace/deploy-test
+ cp /var/lib/jenkins/workspace/batch-test/build/libs/batch-0.0.1-SNAPSHOT.jar /var/lib/jenkins/workspace/deploy-test/.
Finished: SUCCESS
</code></pre><ul><li><code>$JENKINS_HOME/workspace/deploy-test/</code>에 jar파일이 복사되었네요.<figure><a href=/images/2021/0330/build-jar.png><img src=/images/2021/0330/build-jar.png alt=build-jar></a></figure></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://bokyung.dev/tags/aws/>AWS</a></li><li><a href=https://bokyung.dev/tags/jenkins/>Jenkins</a></li><li><a href=https://bokyung.dev/tags/spring/>Spring</a></li><li><a href=https://bokyung.dev/tags/gradle/>gradle</a></li></ul><nav class=paginav><a class=prev href=https://bokyung.dev/2021/03/31/jenkins-batch-job/><span class=title>« 이전 페이지</span><br><span>Jenkins에서 Spring Batch Job을 실행하기</span></a>
<a class=next href=https://bokyung.dev/2021/03/17/jenkins-install/><span class=title>다음 페이지 »</span><br><span>Amazon Linux2에 Jenkins 설치하기</span></a></nav><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8342838924011258 data-ad-slot=2315271952 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></footer><script src=https://utteranc.es/client.js repo=bokyung-kang/blog-comments issue-term=title theme=github-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2021 <a href=https://bokyung.dev/>Bokyung's Note</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})});var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}</script></body></html>